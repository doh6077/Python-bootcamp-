2단계 - 가격이 사전 설정된 가격보다 낮을 때 이메일로 알려주기
가격이 타겟 가격보다 낮아지면 이메일 보내기


상품 가격이 어느 선 이하로 떨어졌을 때, 이메일을 받으려 합니다.

인스턴트 팟의 경우, 100달러로 설정하겠습니다.



1. 가격이 100달러 이하로 떨어졌을 때, smtp 모듈을 사용하여 본인에게 이메일을 전송하세요. 이메일에는 상품명, 현재 가격, 상품 구매 링크가 있어야 합니다.

예)

고정 페이지에서 가격은 99.99달러로 설정되어 있으므로 목표 가격을 100달러 이상으로 설정하여 이메일 기능을 테스트할 수 있습니다.



솔루션 2



.env 파일에 이메일과 비밀번호 숨기기


환경 변수는 이미 35일차와 38일차에서 다루었습니다. 비밀번호, 이메일 주소, API 키와 같은 민감한 정보는 숨기는 것이 좋습니다. 정보를 숨기는 좋은 방법은 .py 파일에 소스 코드와 분리하여 보관하는 것입니다.



1. .env 파일 생성하기






2. .env 파일은 개인 정보를 저장하는 키 값 쌍으로 구성되어야 합니다. 다음과 같은 형태여야 합니다.



SMTP_ADDRESS="smtp.gmail.com"EMAIL_ADDRESS="angela@email.com"EMAIL_PASSWORD="Use_an_App_Password_from_your_email_provider"


3. main.py 파일에서 os 및 dotenv 모듈을 사용하여 .py 파일에서 개인 정보를 제거합니다.


dotenv 문서에서 방법을 확인할 수 있습니다: https://pypi.org/project/python-dotenv/




솔루션 3



SMTP 서버 연결이 끊어지는 오류가 발생했나요?


참고: 문제가 발생하고 이 오류가 계속 발생하는 경우:


1. 이메일 제공업체에 맞는 올바른 SMS 주소를 입력했는지 확인하세요:

Gmail: smtp.gmail.com

Hotmail: smtp.live.com

Outlook: outlook.office365.com

Yahoo: smtp.mail.yahoo.com

다른 이메일 제공업체를 사용하는 경우, 사용하려는 이메일 제공업체를 구글에 검색하세요 (예: “Gmail SMTP address”).



다음은 32일차 생일 축하 메시지에서 설명한 대로 Gmail 및 야후 주소에서 이메일을 보내는 사용자에 대한 구체적인 단계입니다.


2. 계정의 보안 설정에서 이메일에 대한 2단계 인증을 사용 설정합니다. 예를 들어, Google 계정 관리 -> 보안으로 이동합니다.


3. 이메일 설정에서 앱 비밀번호를 추가합니다. 설정 드롭다운에서 'Other'를 선택하고 비밀번호를 선택합니다. 이 앱 비밀번호를 Python 코드에 사용합니다.


4. 코드를 다음과 같이 변경하여 포트 번호를 추가합니다:

smtplib.SMTP("smtp.gmail.com", port=587)